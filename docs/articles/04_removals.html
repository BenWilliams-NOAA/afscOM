<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Removals • afscOM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Removals">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">afscOM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/afscOM.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_model_dimensions.html">Model Dimensions</a>
    </li>
    <li>
      <a href="../articles/02_specifying_demographic_parameters.html">Specifying Demographic Rates</a>
    </li>
    <li>
      <a href="../articles/03_recruitment.html">Recruitment</a>
    </li>
    <li>
      <a href="../articles/04_removals.html">Removals</a>
    </li>
    <li>
      <a href="../articles/05_model_options.html">Model Options</a>
    </li>
    <li>
      <a href="../articles/06_observation_processes.html">Observation Processes</a>
    </li>
    <li>
      <a href="../articles/07_multiyear_projections.html">Conducting Multiyear Projections</a>
    </li>
    <li>
      <a href="../articles/08_alaska_sablefish.html">A Spatial Model Example</a>
    </li>
    <li>
      <a href="../articles/09_spatial_om_example.html">A Spatial Model Example</a>
    </li>
    <li>
      <a href="../articles/10_nep_transboundary_sablefish.html">Example: Northeast Pacific Transboundary Sablefish Model</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Removals</h1>
            
      

      <div class="hidden name"><code>04_removals.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="specifying-removals">Specifying Removals<a class="anchor" aria-label="anchor" href="#specifying-removals"></a>
</h2>
<p>The projection functions require an annual removals input. This input
can be provided in several ways, depending on the exact use case of the
model. Notably, this input can be provided either in units of catch
weight, or in units of fishing mortality (F), depending on the value of
<code>model_options$removals_input</code>. Removals cannot currently be
input as a “harvest rate”, though a helper function <code>mu_to_F</code>
is available to approximately convert between fishing mortality and
harvest rate units.</p>
<p>The simplest way to input removals is to provide a timeseries of
removals by fleet and region, of dimension
<code>[nyears, nfleets, nregions]</code>. When provided in this format,
exactly the provided amount of catch (or F) will be used to determine
removals from the population by each fleet within each region.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyears</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">nregions</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">nfleets</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span></span>
<span><span class="co"># Specify removals as a timeseries of catch</span></span>
<span><span class="va">removals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">10</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nyears</span>, <span class="va">nfleets</span>, <span class="va">nregions</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">removals_input</span> <span class="op">&lt;-</span> <span class="st">"catch"</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span><span class="va">init_naa</span>, removals_timeseries<span class="op">=</span><span class="va">removals</span>, <span class="va">recruitment</span>, <span class="va">dem_params</span>, <span class="va">nyears</span>, <span class="va">model_options</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># OR specify removals as a fishing mortality timeseries</span></span>
<span><span class="va">fs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">0.04</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nyears</span>, <span class="va">nfleets</span>, <span class="va">nregions</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">removals_input</span> <span class="op">&lt;-</span> <span class="st">"F"</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span><span class="va">init_naa</span>, removals_timeseries<span class="op">=</span><span class="va">fs</span>, <span class="va">recruitment</span>, <span class="va">dem_params</span>, <span class="va">nyears</span>, <span class="va">model_options</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, users can input removals as a timeseries of catch of
dimension <code>nyears</code> (either a vector or array), alongside a
fleet apportionment matrix (via
<code>model_options$fleet_apportionment</code>) that specifies what
portion of the total removals timeseries should be apportioned to each
fleet within each region.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyears</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">nregions</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">nfleets</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span></span>
<span><span class="co"># Specify removals as a timeseries of global catch</span></span>
<span><span class="va">removals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">20</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nyears</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apportion catch to the individual fleets as a 75-25 split</span></span>
<span><span class="va">fleet_removals_apportionment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="cn">NA</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nyears</span>, <span class="va">nfleets</span>, <span class="va">nregions</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fleet_removals_apportionment</span><span class="op">[</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.75</span> <span class="co"># 75% of removals to fleet 1</span></span>
<span><span class="va">fleet_removals_apportionment</span><span class="op">[</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.25</span> <span class="co"># 25% of removals to fleet 2</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">removals_input</span> <span class="op">&lt;-</span> <span class="st">"catch"</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">fleet_apportionment</span> <span class="op">&lt;-</span> <span class="va">fleet_removals_apportionment</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span><span class="va">init_naa</span>, removals_timeseries<span class="op">=</span><span class="va">removals</span>, <span class="va">recruitment</span>, <span class="va">dem_params</span>, <span class="va">nyears</span>, <span class="va">model_options</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="catch-control-rule-functions">Catch Control Rule Functions<a class="anchor" aria-label="anchor" href="#catch-control-rule-functions"></a>
</h4>
<p>Often, it is useful to compute removals as a function of the current
state of the population via some form of catch control rule (CCR; also
harvest control rule, HCR). To do this, define an R function that
accepts as parameters: 1) a <code>[1, nages, nsexes, nregions]</code>
dimensional array of numbers-at-age; and 2) a list of demographic
parameters subset to a single year (all demographic inputs will have
dimension <code>[1, nages, nsexes, nregions, nfleets]</code>).
Additional parameters can also be supplied to a user-defined CCR
function, but only the current simulations timestep’s numbers-at-age
array and demographic parameters are directly available to such
function. All other parameters must be specified at the start of the
simulation.</p>
<p>Once defined, add a reference to this function to
<code>model_options$hcr$hcr_func</code> and a named list of extra
parameter values to <code>model_options$hcr$hcr_pars</code>. Upon
reaching the end of a provided removals timeseries (which can be of
length 0), the projection function will automatically begin using the
supplied function to determine future removals. If using a CCR alongside
a removals timeseries, the output units of the CCR function must match
those of the removals timeseries (defined by
<code>model_options$removals_input</code>). Below are two example of
using CCRs – one defining a complex threshold scaling function and one
defining a simple constant catch rule: …</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example 1: Complex threshold scaling function</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">hcr</span><span class="op">$</span><span class="va">hcr_func</span> <span class="op">&lt;-</span> <span class="va">threshold_f_hcr</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">hcr</span><span class="op">$</span><span class="va">hcr_pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fmax <span class="op">=</span> <span class="fl">0.1</span>,         <span class="co"># Maximum F</span></span>
<span>    fmin <span class="op">=</span> <span class="fl">0.0</span>,         <span class="co"># Minimum F,</span></span>
<span>    urp <span class="op">=</span> <span class="fl">100</span>,          <span class="co"># Upper reference point (SSB)</span></span>
<span>    lrp <span class="op">=</span> <span class="fl">5</span>             <span class="co"># Lower reference point (SSB)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span></span>
<span>  init_naa <span class="op">=</span> <span class="va">init_naa</span>,</span>
<span>  removals_timeseries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  recruitment <span class="op">=</span> <span class="va">recruitment</span>,</span>
<span>  dem_params <span class="op">=</span> <span class="va">dem_params</span>,</span>
<span>  nyears <span class="op">=</span> <span class="va">nyears</span>,</span>
<span>  model_options <span class="op">=</span> <span class="va">model_options</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 1: Constant catch rule</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">hcr</span><span class="op">$</span><span class="va">hcr_func</span> <span class="op">&lt;-</span> <span class="va">constant_catch_hcr</span></span>
<span><span class="va">model_options</span><span class="op">$</span><span class="va">hcr</span><span class="op">$</span><span class="va">hcr_pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    c <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span></span>
<span>  init_naa <span class="op">=</span> <span class="va">init_naa</span>,</span>
<span>  removals_timeseries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  recruitment <span class="op">=</span> <span class="va">recruitment</span>,</span>
<span>  dem_params <span class="op">=</span> <span class="va">dem_params</span>,</span>
<span>  nyears <span class="op">=</span> <span class="va">nyears</span>,</span>
<span>  model_options <span class="op">=</span> <span class="va">model_options</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Benjamin Williams, Joshua Zahner, Matt Cheng, Maia Kapur.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer>
</div>






  </body>
</html>
